CREATE TABLE USER_POINT (
    USER_ID        	BIGINT PRIMARY KEY,
    POINT_TOTAL  	INT NOT NULL
);

CREATE TABLE POINT (
    POINT_ID        	BIGINT AUTO_INCREMENT PRIMARY KEY,
    USER_ID         	BIGINT NOT NULL,
    POINT_TYPE     		VARCHAR(20) NOT NULL,
    POINT_FG      		VARCHAR(20),
    ORIGINAL_AMOUNT 	INT NOT NULL,
    REMAIN_AMOUNT   	INT NOT NULL,
    EXPIRED_DT      	TIMESTAMP NOT NULL,
    CREATE_DT      		TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IDX_POINT_01
    ON POINT(USER_ID);

CREATE INDEX IDX_POINT_02
    ON POINT(USER_ID, POINT_TYPE);


CREATE TABLE POINT_USE_HIS (
    USE_HIS_ID      BIGINT AUTO_INCREMENT PRIMARY KEY,
    USE_POINT_ID   	BIGINT NOT NULL,
    EARN_POINT_ID  	BIGINT NOT NULL,
    ORDER_NO        VARCHAR(50) NOT NULL,
    AMOUNT          INT NOT NULL
);

CREATE INDEX IDX_POINT_USE_HIS_01
    ON POINT_USE_HIS(USE_POINT_ID);

CREATE INDEX IDX_POINT_USE_HIS_02
    ON POINT_USE_HIS(EARN_POINT_ID);